var monhocArr,coursespos=0;function toDKSelectedChange_callback2(e){var t=e.value.split("|");""!=t[1]&&alert(t[1]),document.getElementById("divKQ").innerHTML=t[0],document.body.disabled="",document.body.style.cursor="default",isProcessing=!1,coursespos++,alert("Đã chọn môn học thứ "+coursespos);try{coursespos<monhocArr.length?fastDKOSB(monhocArr[coursespos]):1==$("#tudongluudk")[0].checked?LuuDanhSachDangKy():alert("Đã chọn tất cả các môn! Bấm lưu đăng kí thật nhanh nào!")}catch(e){}}function LuuDanhSachDangKy_HopLe_callback(e){var t=e.value.split("||");if(document.body.style.cursor="default",1==t.length)return!1;if(""!=t[0]&&null!=t[0]){if("false"==t[0])return!1;alert(t[0])}t[0].includes("Ngoài thời gian")||t[0].includes("Beside allowed time of course registration!")||t[0].includes("outOfTimeDK")||(alert("Đã lưu kết quả! Hãy xem lại danh sách"),EduSoft.Web.UC.DangKyMonHoc.ShowDSDaDangKy(ShowDSDaDangKy_Callback),location.href="#divKQ")}function LuuDanhSachDangKy_callback(e){EduSoft.Web.UC.DangKyMonHoc.LuuDanhSachDangKy_HopLe(!0,!1,LuuDanhSachDangKy_HopLe_callback)}function toggleSelectRow(e,t){try{var o=document.getElementById("chk_"+e);o.checked=t,o.parentNode.parentNode.style.backgroundColor=t?"#CCCCCC":"White"}catch(e){}}function toDKSelectedChange_callback(e){if(""==e.value)window.open("default.aspx?page=dkmonhoc","_blank");else{var t=!1,o=!1,n=e.value.split("|"),l=n[1];if(2==n.length)alert(n[0]),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else{var a=n[4],c=n[5],s=n[34],d=n[35],u=n[6],r=n[7],i=n[8],g=(n[28],n[29]),h=n[30],m=n[31],y=n[32],b=n[33],p=n[36];if("dhmxhetx"==n[0])confirm("Môn học học trực tuyến, tiếp tục đăng ký?")&&(o=!0,toggleSelectRow(l,!0),a&&toggleSelectRow(a,!1),EduSoft.Web.UC.DangKyMonHoc.LuuVaoKetQuaDangKy(t,o,n[1],n[12],n[13],n[14],n[15],n[16],(!0).toString(),a,n[25],n[26],n[27],d,toDKSelectedChange_callback2));else if(1==c)alert(vuotTC),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else if(1==s)alert("Vượt số tín chỉ tối đa ngoài ngành cho phép!"),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else if(0==h)alert(errorChuyenNganhChinh),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else if(0==m)alert(errorChuyenNganhChuyenSau),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else if(0==y)alert(errorGioiHanSTC+l),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else if(0==b)alert(errorGioiHanSoTCThayDoi),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else if(0==p)alert("Không được đăng ký môn học thuộc nhóm tự chọn khác nhóm "+n[37].toString()),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else if(1==n[21]&&0==n[22]){var f="0"==n[23]?errorCaiThienDiemD:errorCaiThienHocKy+n[23];alert(f),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1}else if(g)alert(g),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else if(i)alert(i),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else if(u)alert(u),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else if(1==n[9]){if(1==n[17]||3==n[17])S=3==n[17]?errorMucDoTrungTKB0+n[19]+", "+n[20]+"% "+errorMucDoTrungTKB1:trungTKBChoPhep,confirm(S)?(o=!0,toggleSelectRow(l,!0),a&&toggleSelectRow(a,!1),EduSoft.Web.UC.DangKyMonHoc.LuuVaoKetQuaDangKy(t,o,n[1],n[12],n[13],n[14],n[15],n[16],(!0).toString(),a,n[25],n[26],n[27],d,toDKSelectedChange_callback2)):(toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1);else alert(trungTKBKChoPhep),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1}else if(n[10])n[11]?confirm(n[10])?(t=!0,toggleSelectRow(l,!0),EduSoft.Web.UC.DangKyMonHoc.LuuVaoKetQuaDangKy(t,o,n[1],n[12],n[13],n[14],n[15],n[16],(!0).toString(),a,n[25],n[26],n[27],d,toDKSelectedChange_callback2)):(toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1):"1"==n[11]&&(toggleSelectRow(l,!1),alert(n[10]),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1);else if(""!=n[24])if("khongchotrung"==n[24])alert(errorTrungLichThiCam),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else if("choluachon"==n[24]){var S=errorTrungLichThiLuaChon;confirm(S)?(toggleSelectRow(l,!0),a&&toggleSelectRow(a,!1),EduSoft.Web.UC.DangKyMonHoc.LuuVaoKetQuaDangKy(t,o,n[1],n[12],n[13],n[14],n[15],n[16],(!0).toString(),a,n[25],n[26],n[27],d,toDKSelectedChange_callback2)):(toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1)}else alert(errorTrungLichThiVuot+n[24]),toggleSelectRow(l,!1),document.body.disabled="",document.body.style.cursor="default",isProcessing=!1;else 0==n[0]?(r&&alert(r),toggleSelectRow(l,!0),EduSoft.Web.UC.DangKyMonHoc.LuuVaoKetQuaDangKy(t,o,n[1],n[12],n[13],n[14],n[15],n[16],(!0).toString(),a,n[25],n[26],n[27],d,toDKSelectedChange_callback2)):(toggleSelectRow(l,!0),toggleSelectRow(a,!1),EduSoft.Web.UC.DangKyMonHoc.LuuVaoKetQuaDangKy(t,o,n[1],n[12],n[13],n[14],n[15],n[16],(!0).toString(),a,n[25],n[26],n[27],d,toDKSelectedChange_callback2))}}}function toDKSelectedChange(e){document.body.disabled="false",document.getElementById("IDchk_all").checked=!1;var t=e.value.split("|");EduSoft.Web.UC.DangKyMonHoc.DangKySelectedChange(!0,t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],toDKSelectedChange_callback)}function ShowTatCaTDK_callback(e){try{document.body.style.cursor="default",document.getElementById("divTDK").innerHTML=null==e?textKhongMoMH:e.value,document.getElementById("txtMaMH1").value="";var t=document.getElementById("txtKhoa");null!=t&&(t.value="");var o=document.getElementById("txtLop");null!=o&&(o.value="")}catch(e){}appendGuiAutoDK()}function appendGuiAutoDK(){try{if($("#pnlDSMonhocDK")[0]&&($("table.title-table")[0].getElementsByTagName("tbody")[0].childNodes[0].getElementsByTagName("td")[0].setAttribute("width","50px"),null==$("#AUTODK")[0]&&$("#pnlDSMonhocDK").append('<div style="margin-top: 5px"><div><span class="d-block p-2 bg-success text-white" id="AUTODK" style="font-size:14px;font-weight:bold;">AUTO ĐĂNG KÍ</span></div><div><span style="width:110px;margin-left:5px;font-size:15px">Điền Value môn học:</span></div><div><textarea class="form-control" placeholder="Nhập vào đây value của các môn học, mỗi môn một dòng" style="margin-left:5px; width: 600px; height: 100px; resize: both;font-size:12px" id="subject" rows="4"></textarea></div> <div style="margin-left:5px;margin-top:5px"> <input type="checkbox" id="tudongluudk" checked=""> <label>Tự động lưu kết quả khi chọn xong tất cả các môn</label> </div><div><button type="button" style="margin-left:5px;margin-top:2px" class="btn btn-success btn-sm" data-toggle="tooltip" data-placement="top" title="Bấm để chọn môn nhanh" id="btndangkymon" onclick="coursespos=0;fastDK()">Chọn môn</button><button type="button" style="margin-top:2px;margin-left:2px" class="btn btn-warning btn-sm" data-toggle="tooltip" data-placement="top" title="Bấm để lưu kết quả đăng kí" id="btnluumon" onclick="LuuDanhSachDangKy()">Lưu kết quả</button></div><div style="margin-top:2px;margin-left:5px;font-size:14px">Hướng dẫn: Nhấn nút copy trước môn học cần đăng kí để sao chép value môn học rồi dán vào ô Điền Value môn học mỗi môn một dòng sau đó nhấn chọn môn để tool tự động chọn môn, kiểm tra danh sách môn đã chọn đã cập nhật hết số môn chưa, nếu rồi thì nhấn nút lưu để chọn môn.</div><div><span style="margin-left:5px;font-size:14px">Cần hỗ trợ liên hệ: </span><a style="font-size:14px" href="https://www.facebook.com/kenny.nguyen.153" target="_blank">Nguyễn Linh</a></div><div id="trangthai"></div></div>'),0==document.getElementsByClassName("btnCopyValuethis").length)){$("input").each(function(){$(this).attr("disabled")&&$(this).removeAttr("disabled")});var e,t=$("#divTDK")[0].querySelectorAll("input[type=checkbox]");for(e=0;e<t.length;e++){var o=document.createElement("input");o.setAttribute("onclick","copyValueThis(this)"),o.setAttribute("class","btn btn-primary btn-sm btnCopyValuethis"),o.setAttribute("style","margin-top:2px"),o.setAttribute("type","button"),o.setAttribute("value","Copy"),t[e].parentNode.append(o)}}}catch(e){}}function logMess(e){try{e.split(" ");$("#trangthai").prepend('<div class="alert alert-primary alert-dismissible fade show" role="alert"><strong>Trạng thái: </strong>'+e+'<button onclick="this.parentElement.remove()" type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span> </button> </div>')}catch(e){}}function copyValueThis(e){try{var t=document.createElement("textarea"),o=e.parentNode.firstChild;t.value=o.value,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove(),alert("Đã copy giá trị môn học")}catch(e){}}function fastDK(){var e=(monhocArr=$("#subject").val().split("\n"))[coursespos].split("|")[1];if($("#divKQ")[0].outerHTML.includes(e))coursespos<monhocArr.length?(coursespos++,alert("Bỏ qua môn thứ "+coursespos),fastDK()):(alert("Bỏ qua môn thứ "+(coursespos+1)),1==$("#tudongluudk")[0].checked?LuuDanhSachDangKy():alert("Đã chọn tất cả các môn! Bấm lưu đăng kí thật nhanh nào!"));else try{fastDKOSB(monhocArr[coursespos])}catch(e){alert("Lỗi khi chọn môn đầu tiên")}}function fastDKOSB(e){var t=monhocArr[coursespos].split("|")[1];if($("#divKQ")[0].outerHTML.includes(t))coursespos<monhocArr.length-1?(coursespos++,alert("Bỏ qua môn thứ "+coursespos),fastDK()):(alert("Bỏ qua môn thứ "+(coursespos+1)),1==$("#tudongluudk")[0].checked?LuuDanhSachDangKy():alert("Đã chọn tất cả các môn! Bấm lưu đăng kí thật nhanh nào!"));else{var o=e.split("|");EduSoft.Web.UC.DangKyMonHoc.DangKySelectedChange(!0,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],toDKSelectedChange_callback)}}window.alert=function(e){return console.log("Trạng thái: "+e),e.includes("Server đang tải lại dữ liệu")&&location.reload(),logMess(e),!0},document.title.includes("Failed to load viewstate")&&window.open("Default.aspx?page=dangnhap","_self"),appendGuiAutoDK();